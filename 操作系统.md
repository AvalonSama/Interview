# 操作系统

</br>

#### 线程与进程有什么区别

  > [!TIP]
  > 进程是操作系统**资源分配**的最小单位，线程是**任务调度和执行**（CPU调度）的最小单元。

- 线程与进程的执行是有区别的。</br>
  每个独立的线程有自己的程序入口、顺序执行序列和程序的出口，但是线程不能独立执行，必须依附于程序之中，由应用程序提供多个线程的并发控制。å
- 通常在一个进程中可以包含若干个线程，当然**一个进程中至少有一个线程**，不然没有存在的意义。
- **进程有自己独立的地址空间**，每启动一个进程，系统都会为其分配地址空间，建立数据表来维护代码段、堆栈段和数据段，这种操作非常昂贵；</br>
  **线程没有独立的地址空间**，它使用相同的地址空间**共享数据**，因此CPU切换一个线程的花费远比进程要小很多，同时创建一个线程的开销也比进程要小很多。
- 多线程程序只要有一个线程死掉，整个进程也死掉了；</br>
  **多进程程序更健壮**，在保护模式下，一个进程死掉并不会对另外一个进程造成影响，因为进程有自己独立的地址空间。
- **线程之间通信更方便**，同一个进程下，线程共享全局变量、静态变量等数据（但多线程程序处理好同步与互斥是个难点）；</br>
  而进程之间的通信需要以**通信**的方式（IPC）进行。

</br>

#### 进程间通信与线程间通信

- 不同进程间有着不同的虚拟地址空间，所以**进程间的通信不能简单的直接共享内存**，常用的通信方式有管道、共享内存、消息队列、信号量、套接字等。
- 线程是**共享进程的内存空间**，所以考虑好互斥和同步即可，常用的通信方式有：锁（互斥）、条件变量（同步）、信号量（同步）。

</br>

#### 进程的三个状态

- **就绪状态**其实就是获取了除CPU外的所有资源，只要处理器分配资源就可以马上执行。就绪状态有相关的排队序列。
- **运行状态**就是获得了处理器分配的资源，程序开始执行。
- **阻塞状态**，当程序条件不够时候，需要等待条件满足时候才能执行，如等待IO操作时候，此刻的状态就叫阻塞态。

</br>

#### 什么是协程

- 协程是一个线程情况下，多个执行流程（即协程）由线程控制，分别使用分配给该线程的机器资源的概念。协程可以理解为线程内部调度的基本单位。
- 处理器调度（即线程）会有很大的场景切换消耗，而对处理器来说，协程属于同一个调度，切换消耗较小。
- 在协程中控制共享资源不加锁，只需要判断状态就好了，所以执行效率比多线程高很多。

<br>

> [!NOTE|label:参考资料]
> [面试之进程和线程-wolf_break](https://blog.csdn.net/wolf_break/article/details/84769653)
> 